machine:
  java:
    version: oraclejdk8
general:
  branches:
    ignore:
      - /no\-test\-.*/
dependencies:
  override:
    - android update sdk -u -a -t --accept-license
    - ./gradlew dependencies -PhelloAwsAccessKeyID="$AWS_ACCESS_KEY_ID" -PhelloAwsSecretKey="$AWS_SECRET_KEY"
test:
  override:
    - ./gradlew clean testDebug -PdisablePreDex -PhelloAwsAccessKeyID="$AWS_ACCESS_KEY_ID" -PhelloAwsSecretKey="$AWS_SECRET_KEY"
    - cp -r app/build/outputs $CIRCLE_ARTIFACTS
    - cp -r app/build/reports/tests/* $CIRCLE_TEST_REPORTS
