machine:
  java:
    version: oraclejdk8
general:
  branches:
    ignore:
      - /no\-test\-.*/
dependencies:
  override:
    - echo y | android update sdk -u -a -t android-24,extra-android-m2repository,extra-google-m2repository,extra-android-support,build-tools-24.0.2
    - ./gradlew dependencies -PhelloAwsAccessKeyID="$AWS_ACCESS_KEY_ID" -PhelloAwsSecretKey="$AWS_SECRET_KEY"
test:
  override:
    - ./gradlew clean testDebug -PdisablePreDex -PhelloAwsAccessKeyID="$AWS_ACCESS_KEY_ID" -PhelloAwsSecretKey="$AWS_SECRET_KEY"
    - cp -r app/build/outputs $CIRCLE_ARTIFACTS
    - cp -r app/build/reports/tests/* $CIRCLE_TEST_REPORTS
